<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Gallon</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-12-13T09:18:26.572Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>gallon</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexo配置指南</title>
    <link href="http://yoursite.com/posts/684e7cbb/"/>
    <id>http://yoursite.com/posts/684e7cbb/</id>
    <published>2019-12-11T03:46:54.000Z</published>
    <updated>2019-12-13T09:18:26.572Z</updated>
    
    <content type="html"><![CDATA[<p>使用hexo写了大概一年左右的博客，期间参考网上各种教程给博客来了个大装修。但就像是做衣服，使用不同的布料，缝缝补补给生硬凑出来的一样，最终成了四不像。非但如此，因为各种插件和没用的渲染，博客的打开速度简直惨不忍睹。</p><p>所以，打算翻新一下，从头开始再搭一个。这次的原则就是简洁，不再搞那些没用的花里胡哨的东西。配置过程记录如下。所有的配置文件在<a href="https://github.com/GallonHu/blog-config" target="_blank" rel="noopener">github仓库</a>。</p><a id="more"></a><h2 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h2><p><a href="https://hexo.io/" target="_blank" rel="noopener">hexo</a>是一个开源的静态博客框架，基本开箱即用。安装见官网。</p><p>站点的配置文件在博客的根目录下的<code>_config.yml</code>文件中，具体各个字段的意义以及配置方法参见<a href="https://hexo.io/docs/configuration" target="_blank" rel="noopener">hexo官网</a></p><h3 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h3><p>体验了蛮多的<em>hexo</em>主题，最终挑选了<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">icarus</a>。</p><p>主要的原因是：</p><ol><li>界面简洁，适配各个终端</li><li>集成度高，内置的插件基本满足日常使用</li><li>开发团队较为活跃，目前还在持续更新</li></ol><p>主题的配置基本都在<code>themes/icarus/_config.yml</code>文件中。</p><p>默认的主题配置包含以下内容：</p><ul><li>站点首选项和页面元数据</li><li>顶部导航栏链接</li><li>底部页脚链接</li><li>文章显示设置</li><li>评论、分享和搜索插件设置</li><li>侧边小部件设置</li><li>其他显示和分析插件</li><li>CDN设置</li></ul><p>参见各字段的含义进行配置即可。</p><h3 id="使用技巧"><a href="#使用技巧" class="headerlink" title="使用技巧"></a>使用技巧</h3><h4 id="阅读更多"><a href="#阅读更多" class="headerlink" title="阅读更多"></a>阅读更多</h4><p>在你的文章中添加<code>&lt;!-- more --&gt;</code>标签。该标签之前的帖子内容将被标记为摘录，而该标签之后的内容将不会显示在索引页面上。</p><p><strong>效果</strong></p><div align="center"><img src=" http://q1i38chc1.bkt.clouddn.com/screen/Screen-Shot-2019-12-13-at-9.57.09-AM.jpg" style="zoom:33%;"></div><h4 id="添加缩略图"><a href="#添加缩略图" class="headerlink" title="添加缩略图"></a>添加缩略图</h4><p>在配置文件中启用缩略图（默认启用）</p><figure class="highlight yaml hljs"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">article:</span></span><br><span class="line">    <span class="hljs-attr">thumbnail:</span> <span class="hljs-literal">true</span></span><br></pre></td></tr></table></figure><p>然后，在文章的开头提供URL或图像文件的路径</p><figure class="highlight markdown hljs"><figcaption><span>post.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: your title</span><br><span class="line">thumbnail: /gallery/thumbnails/desert.jpg</span><br><span class="line">---</span><br><span class="line">Post content...</span><br></pre></td></tr></table></figure><p><strong>图片路径</strong></p><p>图片的路径应该是相对于站点目录的相对路径。举例来说，如果你想用下面的图片来当作缩略图</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;your blog&gt;&#x2F;source&#x2F;gallery&#x2F;image.jpg</span><br></pre></td></tr></table></figure><p>你需要使用如下的图片路径</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;gallery&#x2F;image.jpg</span><br></pre></td></tr></table></figure><p>另外，建议你将所有图片放在<code>_posts</code>文件夹中的<code>asset</code>文件夹下。</p><p><strong>效果图</strong></p><div align="center"><img src="  http://q1i38chc1.bkt.clouddn.com/screen/Screen-Shot-2019-12-13-at-10.52.32-AM.png" style="zoom:33%;"></div><h4 id="添加目录"><a href="#添加目录" class="headerlink" title="添加目录"></a>添加目录</h4><p>在配置文件中启用目录（默认启用）</p><figure class="highlight yaml hljs"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">widgets:</span></span><br><span class="line">    <span class="hljs-bullet">-</span></span><br><span class="line">        <span class="hljs-attr">type:</span> <span class="hljs-string">toc</span></span><br><span class="line">        <span class="hljs-attr">position:</span> <span class="hljs-string">left</span></span><br></pre></td></tr></table></figure><p>然后，在文章的开头添加<code>toc: true</code></p><figure class="highlight markdown hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: Table of Contents Example</span><br><span class="line">toc: true</span><br><span class="line">---</span><br><span class="line">Post content...</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><div align="center"><img src="  http://q1i38chc1.bkt.clouddn.com/screen/Screen-Shot-2019-12-13-at-11.01.24-AM.png" style="zoom:33%;"></div><h2 id="插件篇"><a href="#插件篇" class="headerlink" title="插件篇"></a>插件篇</h2><h3 id="主题内置插件"><a href="#主题内置插件" class="headerlink" title="主题内置插件"></a>主题内置插件</h3><h4 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h4><p><a href="https://blog.zhangruipeng.me/hexo-theme-icarus/categories/Plugins/Comment/" target="_blank" rel="noopener">内置评论插件</a>官方配置文档，我使用的是<code>valine</code></p><p>效果</p><div align="center"><img src="  http://q1i38chc1.bkt.clouddn.com/screen/Screen-Shot-2019-12-13-at-3.46.21-PM.png" style="zoom:33%;"></div><h4 id="打赏"><a href="#打赏" class="headerlink" title="打赏"></a>打赏</h4><p><a href="https://blog.zhangruipeng.me/hexo-theme-icarus/Plugins/Donation/making-money-off-your-blog-with-donation-buttons/#more" target="_blank" rel="noopener">官方配置文档</a></p><p><strong>效果</strong></p><div align="center"><img src="  http://q1i38chc1.bkt.clouddn.com/screen/Screen-Shot-2019-12-13-at-4.44.39-PM.png" style="zoom:33%;"></div><h3 id="其他插件"><a href="#其他插件" class="headerlink" title="其他插件"></a>其他插件</h3><p>在博客的站点目录下安装插件。</p><h4 id="hexo-abbrlink"><a href="#hexo-abbrlink" class="headerlink" title="hexo-abbrlink"></a><a href="https://github.com/Rozbo/hexo-abbrlink" target="_blank" rel="noopener">hexo-abbrlink</a></h4><p><em>hexo</em>默认的永久链接生成方案是<code>年/月/日/标题</code>。这样一来，链接不但很长，而且，如果你是中文用户，生成的链接中还将包含中文，这无疑会留下很多麻烦。</p><p><strong>安装</strong></p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><p><strong>配置</strong></p><p>修改站点<code>_config.yml</code></p><figure class="highlight yaml hljs"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">permalink:</span> <span class="hljs-string">posts/:abbrlink/</span></span><br></pre></td></tr></table></figure><p>还需要设置两个参数</p><figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-string">alg</span> <span class="hljs-string">--</span> <span class="hljs-string">Algorithm</span> <span class="hljs-string">(currently</span> <span class="hljs-string">support</span> <span class="hljs-string">crc16</span> <span class="hljs-string">and</span> <span class="hljs-string">crc32,</span> <span class="hljs-string">which</span> <span class="hljs-string">crc16</span> <span class="hljs-string">is</span> <span class="hljs-string">default)</span></span><br><span class="line"><span class="hljs-string">rep</span> <span class="hljs-string">--</span> <span class="hljs-string">Represent</span> <span class="hljs-string">(the</span> <span class="hljs-string">generated</span> <span class="hljs-string">link</span> <span class="hljs-string">could</span> <span class="hljs-string">be</span> <span class="hljs-string">presented</span> <span class="hljs-string">in</span> <span class="hljs-string">hex</span> <span class="hljs-string">or</span> <span class="hljs-string">dec</span> <span class="hljs-string">value)</span></span><br></pre></td></tr></table></figure><p>如果你不想用默认的参数，需要在站点<code>_config.yml</code>中添加</p><figure class="highlight yaml hljs"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># abbrlink config</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-attr">abbrlink:</span></span><br><span class="line">  <span class="hljs-attr">alg:</span> <span class="hljs-string">crc32</span>  <span class="hljs-comment">#support crc16(default) and crc32</span></span><br><span class="line">  <span class="hljs-attr">rep:</span> <span class="hljs-string">hex</span>    <span class="hljs-comment">#support dec(default) and hex</span></span><br></pre></td></tr></table></figure><p><em>*效果</em></p><h4 id="hexo-generator-feed"><a href="#hexo-generator-feed" class="headerlink" title="hexo-generator-feed"></a><a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexo-generator-feed</a></h4><p>生成 <em>Atom 1.0</em> 或者 <em>RSS 2.0</em> 为自己的博客提供订阅功能。</p><p><strong>安装</strong></p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p><strong>配置站点目录<code>_config.yml</code></strong></p> <figure class="highlight yaml hljs"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">feed:</span></span><br><span class="line">    <span class="hljs-attr">type:</span> <span class="hljs-string">atom</span></span><br><span class="line">    <span class="hljs-attr">path:</span> <span class="hljs-string">atom.xml</span></span><br><span class="line">    <span class="hljs-attr">limit:</span> <span class="hljs-number">20</span></span><br><span class="line">    <span class="hljs-attr">hub:</span></span><br><span class="line">    <span class="hljs-attr">content:</span></span><br><span class="line">    <span class="hljs-attr">content_limit:</span> <span class="hljs-number">140</span></span><br><span class="line">    <span class="hljs-attr">content_limit_delim:</span> <span class="hljs-string">' '</span></span><br><span class="line">    <span class="hljs-attr">order_by:</span> <span class="hljs-string">-date</span></span><br><span class="line">    <span class="hljs-attr">icon:</span> <span class="hljs-string">icon.png</span></span><br><span class="line">    <span class="hljs-attr">autodiscovery:</span> <span class="hljs-literal">true</span></span><br><span class="line">    <span class="hljs-attr">template:</span></span><br></pre></td></tr></table></figure><p>参数的具体含义见官方仓库。</p><p><strong>验证配置是否成功</strong></p><p>执行<code>hexo g</code>，查看一下<em>public</em>目录，如果有<code>atom.xml</code>文件，则表明配置成功。 </p><p><strong>配置RSS</strong></p><p>这里以<code>icarus</code>主题为例，给<em>rss</em>添加链接，修改<code>_config.yaml</code></p><figure class="highlight yaml hljs"><figcaption><span>_config.yml </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">RSS:</span></span><br><span class="line"><span class="hljs-attr">icon:</span> <span class="hljs-string">fas</span> <span class="hljs-string">fa-rss</span></span><br><span class="line"><span class="hljs-attr">url:</span> <span class="hljs-string">/atom.xml</span></span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><div align="center"><img src=" http://q1i38chc1.bkt.clouddn.com/screen/Screen-Shot-2019-12-11-at-8.05.40-PM.png" style="zoom:33%;"></div><h4 id="hexo-deployer-git"><a href="#hexo-deployer-git" class="headerlink" title="hexo-deployer-git"></a><a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="noopener">hexo-deployer-git</a></h4><p>如果你使用<code>git</code>部署博客的话，需要安装此插件。</p><p><strong>安装</strong></p><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p><strong>配置</strong></p><p>编辑站点配置文件</p><figure class="highlight yaml hljs"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">deploy:</span></span><br><span class="line">  <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">git</span></span><br><span class="line">    <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line">    <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span></span><br><span class="line">  <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">git</span></span><br><span class="line">    <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line">    <span class="hljs-attr">branch:</span> <span class="hljs-string">src</span></span><br><span class="line">    <span class="hljs-attr">extend_dirs:</span> <span class="hljs-string">/</span></span><br><span class="line">    <span class="hljs-attr">ignore_hidden:</span> <span class="hljs-literal">false</span></span><br><span class="line">    <span class="hljs-attr">ignore_pattern:</span></span><br><span class="line">        <span class="hljs-attr">public:</span> <span class="hljs-string">.</span></span><br></pre></td></tr></table></figure><p>具体的参数请参考官方说明。</p><h2 id="脚本篇"><a href="#脚本篇" class="headerlink" title="脚本篇"></a>脚本篇</h2><p>在博客站点目录下新建文件夹<code>scripts</code>，所有的脚本都放在此目录下。</p><h3 id="新建博客自动打开"><a href="#新建博客自动打开" class="headerlink" title="新建博客自动打开"></a>新建博客自动打开</h3><p>当你使用<code>hexo new</code>新建一篇博客时将自动打开<em>markdown</em>编辑器</p><p>新建<code>trigger.js</code>脚本，内容如下</p><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> exec = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>).exec;</span><br><span class="line">hexo.on(<span class="hljs-string">'new'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;</span><br><span class="line">    exec(<span class="hljs-string">'open -a "your/app/path" '</span> + data.path);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>把脚本中<code>your/app/path</code>替换成你的<em>markdown</em>编辑器。</p><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@malcoo?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Tomáš Malík"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Tomáš Malík</span></a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用hexo写了大概一年左右的博客，期间参考网上各种教程给博客来了个大装修。但就像是做衣服，使用不同的布料，缝缝补补给生硬凑出来的一样，最终成了四不像。非但如此，因为各种插件和没用的渲染，博客的打开速度简直惨不忍睹。&lt;/p&gt;
&lt;p&gt;所以，打算翻新一下，从头开始再搭一个。这次的原则就是简洁，不再搞那些没用的花里胡哨的东西。配置过程记录如下。所有的配置文件在&lt;a href=&quot;https://github.com/GallonHu/blog-config&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;github仓库&lt;/a&gt;。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Tutorials" scheme="http://yoursite.com/categories/Tutorials/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
      <category term="Blog" scheme="http://yoursite.com/tags/Blog/"/>
    
  </entry>
  
</feed>
